<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K·∫øt qu·∫£ t√¨m ki·∫øm - Network Equipment Store</title>
    <link rel="stylesheet" href="../CSS/main.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <a class="navbar-brand" href="index.html">üåê NetEquip</a>
            <ul class="navbar-nav">
                <li><a href="index.html">Trang ch·ªß</a></li>
                <li><a href="products.html">S·∫£n ph·∫©m</a></li>
            </ul>
            <div class="navbar-right">
                <a href="cart.html">üõí Gi·ªè h√†ng</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <h1>K·∫øt qu·∫£ t√¨m ki·∫øm</h1>
        
        <form class="search-form" id="search-form">
            <input type="text" id="search-input" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m ho·∫∑c tin t·ª©c...">
            <button type="submit">T√¨m ki·∫øm</button>
        </form>

        <p id="search-info"></p>
        <div id="search-results" class="grid">
            <!-- Results loaded by JS -->
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2025 Network Equipment Store. All rights reserved.</p>
    </footer>

    <script src="../js/main.js"></script>
    <script>
    function performSearch(query) {
        const products = storage.get('products') || [];
        const news = storage.get('news') || [];
        const lowerQuery = query.toLowerCase();
        
        const productResults = products.filter(p => 
            p.name.toLowerCase().includes(lowerQuery) || 
            p.description.toLowerCase().includes(lowerQuery)
        );
        
        const newsResults = news.filter(n => 
            n.title.toLowerCase().includes(lowerQuery) || 
            n.content.toLowerCase().includes(lowerQuery)
        );
        
        const allResults = [
            ...productResults.map(p => ({ type: 'product', ...p })),
            ...newsResults.map(n => ({ type: 'news', ...n }))
        ];
        
        const container = document.getElementById('search-results');
        const infoDiv = document.getElementById('search-info');
        
        infoDiv.innerHTML = `T√¨m th·∫•y <strong>${allResults.length}</strong> k·∫øt qu·∫£ cho "<strong>${query}</strong>"`;
        
        if (allResults.length === 0) {
            container.innerHTML = '<p style="grid-column: 1/-1; text-align: center; padding: 2rem;">Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ ph√π h·ª£p</p>';
            return;
        }
        
        container.innerHTML = '';
        allResults.forEach(item => {
            const card = document.createElement('div');
            card.className = 'card';
            
            if (item.type === 'product') {
                card.innerHTML = `
                    <img src="../IMG/${item.image || 'placeholder.jpg'}" alt="${item.name}">
                    <div class="card-body">
                        <span style="color: #ff69b4; font-size: 0.8rem; font-weight: bold;">S·∫¢N PH·∫®M</span>
                        <h3 class="card-title">${item.name}</h3>
                        <p class="card-text">${item.description}</p>
                        <p class="card-price">$${item.price}</p>
                        <a href="product_detail.html?id=${item.id}" class="card-link">Xem chi ti·∫øt ‚Üí</a>
                    </div>
                `;
            } else {
                card.innerHTML = `
                    <img src="../IMG/${item.image || 'placeholder.jpg'}" alt="${item.title}">
                    <div class="card-body">
                        <span style="color: #ff69b4; font-size: 0.8rem; font-weight: bold;">TIN T·ª®C</span>
                        <h3 class="card-title">${item.title}</h3>
                        <p class="card-text">${item.content}</p>
                        <small style="color: #999;">${item.date}</small><br>
                        <a href="news_detail.html?id=${item.id}" class="card-link">ƒê·ªçc ti·∫øp ‚Üí</a>
                    </div>
                `;
            }
            container.appendChild(card);
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        const params = new URLSearchParams(window.location.search);
        const query = params.get('q') || '';
        
        const input = document.getElementById('search-input');
        input.value = query;
        
        if (query) {
            performSearch(query);
        }
        
        const form = document.getElementById('search-form');
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const newQuery = input.value;
            if (newQuery) {
                window.location.href = `search_result.html?q=${encodeURIComponent(newQuery)}`;
            }
        });
    });
    </script>
</body>
</html>